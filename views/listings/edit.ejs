<% layout("/layouts/boilerplate.ejs") %>

<div class="row">
    <div class="col-8 offset-2">
    <h3>Edit This Listing</h3>
    <form  method="POST"  action="/listings/<%=list._id%>?_method=PUT" novalidate  class="needs-validation"
        enctype="multipart/form-data">
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input class="form-control" name="listing[title]"
             placeholder="<%=list.title%> " value="<%=list.title%>" 
             type="text" required>
             <div class="valid-feedback">
                Title looks Good!
             </div>
             <div class="invalid-feedback">
                Please enter valid title!
             </div>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">Description </label>
            <input name="listing[description]" 
                placeholder="<%=list.description%>"
                class="form-control"
                value ="<%=list.description%>"
                type="text" required>
                
             
            <div class="valid-feedback">
                Discrption looks Good!
             </div>
             <div class="invalid-feedback">
                Please enter valid Description!
             </div>
        </div>

        <div class="mb-3">
            Original Listing Image <br /> 
            <img src="<%=originalImageUrL%> ">
        </div>



        <div class="mb-3">
            <label for="image" class="form-label">Upload New Image</label>
            <input class="form-control" name="listing[image]" placeholder="<%=list.image%>" 
                
                type="file">
                
               
        </div>

        
        <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input class="form-control"  name ="listing[price]" placeholder="<%=list.price%>"
            value ="<%=list.price%>"
            type="text" required>
            <div class="valid-feedback">
                Price looks Good!
             </div>
             <div class="invalid-feedback">
                Please enter valid Price!
             </div>
        </div>

        <div class="row">
            <div class="mb-3 col-md-4 ">

                <label for="location" class="form-label">Location</label>
                <input class="form-control" name = "listing[location]" placeholder="<%=list.location%>"
                value="<%=list.location%>"
                type="text" required>

                <div class="valid-feedback">
                    Location looks Good!
                 </div>
                 <div class="invalid-feedback">
                    Please enter valid Location!
                 </div>

    
            </div>
    
            <div class="mb-3 col-md-8">
                <label for="country" class="form-label">Country</label>
                <input class="form-control" name ="listing[country]" placeholder="<%=list.country%>"
                value="<%=list.country%>"
                type="text" required>
                
                <div class="valid-feedback">
                    Country looks Good!
                 </div>
                 <div class="invalid-feedback">
                    Please enter valid Country!
                 </div>
    
            </div>


        </div>



        
        <br>

        <button class="btn btn-edit">Edit</button>
    </form>
    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
    'use strict'
  
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')
  
    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
      .forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
  
          form.classList.add('was-validated')
        }, false)
      })
  })()
    </script>

    </div>    
</div>
